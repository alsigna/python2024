# Кортежи (tuple)

- [Кортежи (tuple)](#кортежи-tuple)
  - [Описание](#описание)
  - [Когда используются](#когда-используются)
  - [Создание](#создание)
  - [Доступ к элементам (индекс и срезы)](#доступ-к-элементам-индекс-и-срезы)
  - [`namedtuple` - именованный кортеж](#namedtuple---именованный-кортеж)

## Описание

Кортеж это **неизменяемая** **упорядоченная** последовательность данных.  
В одном кортеже данные могут быть разного типа (строки, числа, функции, классы и прочее), консистентность, как в некоторых других языках, не требуется.

Очень напоминает list, но с поправкой на неизменяемость.

Формат записи: круглые скобки в начале/конце кортежа, элементы разделяются запятыми.

```python
my_tuple = (1, 2, 3)
```

Кортежи быстрее, занимают меньше памяти, не требуют копирования. Но используются гораздо реже, чем списки.

## Когда используются

- Нужно защитить данные от изменения (например внешние данные)
- Нужно экономить память
- Нужно использовать в качестве ключей в словаре

> Неизменяемость кортежа не абсолютная. Т.е. состав элементов поменять нельзя, но сами элементы, если они представлены изменяемыми типам, менять можно

```python
tuple_ = ("elem1", 42, [1, 2, 3])

tuple_
>>> ('elem1', 42, [1, 2, 3])

tuple_[-1].append(4)

tuple_
>>> ('elem1', 42, [1, 2, 3, 4])
```

## Создание

```python
# явное указание значений в круглых скобках
interfaces = ("GigabitEthernet0/0", "GigabitEthernet0/1", "GigabitEthernet0/2")

# упаковка (круглые скобки можно пропустить)
interfaces = "GigabitEthernet0/0", "GigabitEthernet0/1", "GigabitEthernet0/2"

# на нескольких строках
configs = (
  "interface Tunnel2",
  "  description dmvpn_tunnel",
  "  ip address 192.168.21.52 255.255.255.0",
  "  ip nhrp registration no-unique",
)

# приведение типов
ip = "192.168.53.123"
ip = tuple(ip.split("."))
>>> ('192', '168', '53', '123')

s = "hello"
tuple(s)
>>> ('h', 'e', 'l', 'l', 'o')

# a - число int
a = 42
# a - кортеж из одного числа
a = (42,)
```

## Доступ к элементам (индекс и срезы)

Аналогично доступу в списках

## `namedtuple` - именованный кортеж

`namedtuple` ведет себя как кортеж (неизменяемый после создания), но доступ к элементам возможен по именованным полям, вместо индексов.

```python
from collections import namedtuple

Neighbor = namedtuple(
    typename="Neighbor",
    field_names=[
        "local_intf",
        "neighbor_intf",
        "neighbor_device",
    ],
)

# или в более кратком виде
Neighbor = namedtuple("Neighbor", ["local_intf", "neighbor_intf", "neighbor_device"])

n1 = Neighbor("Gig1/2/48", "Gig0/12", "border1.site1.ru")

n1.local_intf
>>> 'Gig1/2/48'

n1[0]
>>> 'Gig1/2/48'
```

Представленные таким образом данные проще обрабатывать и читаемость кода значительно повышается.

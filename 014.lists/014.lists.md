# Листы (list)

- [Листы (list)](#листы-list)
  - [Описание](#описание)
  - [Создание](#создание)
    - [Вручную](#вручную)
    - [Приведение типов](#приведение-типов)
    - [`range()`](#range)
    - [Генераторы](#генераторы)
  - [Доступ к элементам (индекс и срезы)](#доступ-к-элементам-индекс-и-срезы)
  - [Полезные функции и методы](#полезные-функции-и-методы)
    - [`len()` - получить длину списка](#len---получить-длину-списка)
    - [`list.append()` - добавить элемент в список справа (в конец)](#listappend---добавить-элемент-в-список-справа-в-конец)
    - [`list.extend()` - расширяет список справа другим списком](#listextend---расширяет-список-справа-другим-списком)
    - [`+` - сложение двух списков](#---сложение-двух-списков)
    - [`in` - проверить вхождение элемента в список](#in---проверить-вхождение-элемента-в-список)
    - [`list.pop()` - изъять элемент списка по индексу](#listpop---изъять-элемент-списка-по-индексу)
    - [`list.remove()` - удалить элемент списка по значению](#listremove---удалить-элемент-списка-по-значению)
    - [`list.sort()` vs `sorted` - сортировать список](#listsort-vs-sorted---сортировать-список)
    - [`min()`, `max()`, `sum()` - минимальный, максимальный элемент, сумма списка](#min-max-sum---минимальный-максимальный-элемент-сумма-списка)
  - [Копирование списка](#копирование-списка)
    - [Поверхностная копия](#поверхностная-копия)
    - [Глубокая копия](#глубокая-копия)
  - [`deque` - двусторонняя очередь](#deque---двусторонняя-очередь)

## Описание

Список это **изменяемая** **упорядоченная** последовательность данных.  
В одном списке данные могут быть разного типа (строки, числа, функции, классы и прочее), консистентность, как в некоторых других языках, не требуется.

Формат записи: квадратные скобки в начале/конце списка, элементы разделяются запятыми.

```python
my_list = [1, 2, 3]
```

## Создание

### Вручную

```python
interfaces = ["GigabitEthernet0/0", "GigabitEthernet0/1", "GigabitEthernet0/2"]

configs = [
  "interface Tunnel2",
  "  description dmvpn_tunnel",
  "  ip address 192.168.21.52 255.255.255.0",
  "  ip nhrp registration no-unique",
]
```

### Приведение типов

```python
ip = "192.168.53.123"
ip = ip.split(".")
>>> ['192', '168', '53', '123']

s = "hello"
list(s)
>>> ['h', 'e', 'l', 'l', 'o']
```

### `range()`

Часто используется для создания "служебного" списка, по которому потом можно будет пройтись циклом.

```python
list(range(10))
>>> [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

list(range(2, 12, 2))
>>> [2, 4, 6, 8, 10]
```

### Генераторы

Рассмотрим в теме циклов/условий

## Доступ к элементам (индекс и срезы)

Доступ по индексу и срезу аналогичен доступу в строках.  

Индекс это порядковый номер элемента в списке.  

- нумерация начинается с нуля
- для указания индекса используются квадратные скобки
- положительный индекс (0, 1, 2, ...) - считаем слева направо (0 - первый символ, 1 - второй символ)
- отрицательный индекс (-1, -2, ...) - считаем справа налево (-1 - последний символ, -2 - предпоследний символ, -3 - третий с конца)

Срез это подмножество элементов списка, которое задаётся следующим образом: my_list[START:STOP:STEP].  

- START - начало среза, по умолчанию 0
- STOP - конец среза. По умолчанию равен длине объекта. НЕ включается в результат!
- STEP - шаг среза. По умолчанию 1.

```python
interfaces = ["gi0/0", "gi0/1", "gi0/2"]

interfaces[1]
>>> 'gi0/1'

interfaces[-1]
>>> 'gi0/2'

interfaces[1:]
>>> ['gi0/1', 'gi0/2']
```

## Полезные функции и методы

### `len()` - получить длину списка

```python
interfaces = ["gi0/0", "gi0/1", "gi0/2"]

len(interfaces)
>>> 3
```

### `list.append()` - добавить элемент в список справа (в конец)

```python
interfaces = ["gi0/0", "gi0/1", "gi0/2"]

interfaces.append("gi0/3")

interfaces
>>> ['gi0/0', 'gi0/1', 'gi0/2', 'gi0/3']
```

### `list.extend()` - расширяет список справа другим списком

```python
interfaces
>>> ['gi0/0', 'gi0/1', 'gi0/2', 'gi0/3']

interfaces.extend(["gi0/4", "gi0/5"])

interfaces
>>> ['gi0/0', 'gi0/1', 'gi0/2', 'gi0/3', 'gi0/4', 'gi0/5']
```

### `+` - сложение двух списков

Объединить два списка можно не только через `list.extend()`, но и через операцию `+`. Разница в том, что `list.extend()` не создает новый объект типа list, а модифицирует существующий. Операция `+` не меняет складываемые списки, а возвращает новый список.

```python
interfaces_gi = ["gi0/0", "gi0/1"]
interfaces_ten = ["ten1/0", "ten1/1", "ten1/2"]

interfaces = interfaces_gi + interfaces_ten

interfaces_gi
>>> ['gi0/0', 'gi0/1']

interfaces_ten
>>> ['ten1/0', 'ten1/1', 'ten1/2']

interfaces
>>> ['gi0/0', 'gi0/1', 'ten1/0', 'ten1/1', 'ten1/2']
```

### `in` - проверить вхождение элемента в список

```python
interfaces = ["ten1/0", "ten1/1", "ten1/2"]

"ten1/1" in interfaces
>>> True

"gi0/1" in interfaces
>>> False
```

### `list.pop()` - изъять элемент списка по индексу

В аргументах можно указать индекс элемента, тогда будет изъят не последний элемент, а элемент с указанными индексом.

```python
interfaces = ['gi0/0', 'gi0/1']

interfaces.pop()
>>> 'gi0/1'

interfaces
>>> ['gi0/0']
```

### `list.remove()` - удалить элемент списка по значению

```python
interfaces = ["gi0/0", "gi0/1", "gi0/2"]

interfaces.remove("gi0/1")

interfaces
>>> ['gi0/0', 'gi0/2']
```

### `list.sort()` vs `sorted` - сортировать список

Сортировать список можно методом `list.sort()`, в этом случае сортируется исходный список и новый объект не создается.  
Функция `sorted` возвращает новый сортированный список, не меняя исходный

```python
interfaces = ["gi0/0", "gi2/1", "gi0/2"]
sorted(interfaces)
>>> ['gi0/0', 'gi0/2', 'gi2/1']

interfaces
>>> ['gi0/0', 'gi2/1', 'gi0/2']

interfaces.sort()

interfaces
>>> ['gi0/0', 'gi0/2', 'gi2/1']
```

### `min()`, `max()`, `sum()` - минимальный, максимальный элемент, сумма списка

```python
numbers = [5, -1, 10, 3]

min(numbers)
>>> -1

max(numbers)
>>> 10
```

## Копирование списка

Список это изменяемые тип данных, поэтому иногда нужно получить копию списка, что бы можно было её менять не модифицируя изначальные данные.

### Поверхностная копия

При поверхностной копии создается новый список и он заполняется ссылками на элементы копируемого списка.

```python
interfaces = ["ten1/0", "ten1/1", "ten1/2"]

# копирование через метод `list.copy()`
interfaces_copy = interfaces.copy()

interfaces_copy
>>>['ten1/0', 'ten1/1', 'ten1/2']

id(interfaces_copy) == id(interfaces)
>> False

# копирование через срез
interfaces_copy = interfaces[:]

# копирование через функции модуля copy
from copy import copy

interfaces_copy = copy(interfaces)
```

### Глубокая копия

Если элемент списка это изменяемый тип данных, то поверхностная копия не защитит от ситуации изменения объекта, который является элементом списка. Эти изменения будут отражаться сразу и в оригинальном и в скопированном списке.  Глубокая копия создает новый список, а затем рекурсивно вставляет в него копии объектов, находящихся в оригинале.

```python

from copy import copy, deepcopy

# проблема при поверхностной копии
interfaces = [["ten", "1/0"], ["ten", "1/1"], ["ten", "1/2"]]
interfaces_copy = copy(interfaces)

interfaces
>>> [['ten', '1/0'], ['ten', '1/1'], ['ten', '1/2']]
interfaces_copy
>>> [['ten', '1/0'], ['ten', '1/1'], ['ten', '1/2']]

interfaces_copy[0][1] = "0/48"

interfaces
>>> [['ten', '0/48'], ['ten', '1/1'], ['ten', '1/2']]
interfaces_copy
>>> [['ten', '0/48'], ['ten', '1/1'], ['ten', '1/2']]

# глубокая копия
interfaces = [["ten", "1/0"], ["ten", "1/1"], ["ten", "1/2"]]
interfaces_copy = deepcopy(interfaces)

interfaces
>>> [['ten', '1/0'], ['ten', '1/1'], ['ten', '1/2']]
interfaces_copy
>>> [['ten', '1/0'], ['ten', '1/1'], ['ten', '1/2']]

interfaces_copy[0][1] = "0/48"

interfaces
>>> [['ten', '1/0'], ['ten', '1/1'], ['ten', '1/2']]
interfaces_copy
>>> [['ten', '0/48'], ['ten', '1/1'], ['ten', '1/2']]
```

## `deque` - двусторонняя очередь

`deque` - двусторонняя очередь, позволяющая делать извлечения/вставку элементов с производительностью O(1) с обоих сторон последовательности. Списки же требуют O(n) для операций `pop(0)` и `insert(0, <value>)`.

```python
from collections import deque

queue = deque(["ten1/0", "ten1/1", "ten1/2"])

queue.appendleft("gi0/0")

queue
>>> deque(['gi0/0', 'ten1/0', 'ten1/1', 'ten1/2'])
```
